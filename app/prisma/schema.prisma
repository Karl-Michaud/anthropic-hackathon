generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

model drafts {
  id             String       @id
  essay          String
  scholarship_id String       @unique
  user_id        String?      @db.Uuid
  scholarships   scholarships @relation(fields: [scholarship_id], references: [id])
}

model prompt_personalities {
  id                      String       @id
  spirit                  String
  tone_style              String
  values_emphasized       String[]
  recommended_essay_focus String
  scholarship_id          String       @unique
  user_id                 String?      @db.Uuid
  scholarships            scholarships @relation(fields: [scholarship_id], references: [id])
}

model prompt_priorities {
  id               String       @id
  primary_focus    PrimaryFocus
  priority_weights Json
  scholarship_id   String       @unique
  user_id          String?      @db.Uuid
  scholarships     scholarships @relation(fields: [scholarship_id], references: [id])
}

model prompt_values {
  id                String       @id
  values_emphasized String[]
  value_definitions Json
  evidence_phrases  String[]
  scholarship_id    String       @unique
  user_id           String?      @db.Uuid
  scholarships      scholarships @relation(fields: [scholarship_id], references: [id])
}

model prompt_weights {
  id             String       @id
  weights        Json
  scholarship_id String       @unique
  user_id        String?      @db.Uuid
  scholarships   scholarships @relation(fields: [scholarship_id], references: [id])
}

model scholarships {
  id                   String                @id @unique
  title                String
  description          String
  prompt               String
  user_id              String?               @db.Uuid
  drafts               drafts?
  prompt_personalities prompt_personalities?
  prompt_priorities    prompt_priorities?
  prompt_values        prompt_values?
  prompt_weights       prompt_weights?
}

model whiteboard_data {
  id                 String   @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  user_id            String   @unique @db.Uuid
  cells              Json     @default("[]")
  scholarships       Json     @default("[]")
  essays             Json     @default("[]")
  json_outputs       Json     @default("[]")
  block_positions    Json     @default("[]")
  is_first_time_user Boolean  @default(true)
  created_at         DateTime @default(now())
  updated_at         DateTime
}

enum ImportanceLevel {
  HIGH
  MEDIUM
  LOW
}

enum PrimaryFocus {
  MERIT
  COMMUNITY
  INNOVATION
  LEADERSHIP
  ACADEMIC_EXCELLENCE
  EQUITY
  OTHER
}
