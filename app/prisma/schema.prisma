generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

model Draft {
  id            String      @id @unique @default(uuid())
  essay         String
  scholarshipId String      @unique @map("scholarship_id")
  userId        String?     @map("user_id") @db.Uuid
  scholarship   Scholarship @relation(fields: [scholarshipId], references: [id])

  @@map("drafts")
}

model PromptPersonality {
  id                    String      @id @unique @default(uuid())
  spirit                String
  toneStyle             String      @map("tone_style")
  valuesEmphasized      String[]    @map("values_emphasized")
  recommendedEssayFocus String      @map("recommended_essay_focus")
  scholarshipId         String      @unique @map("scholarship_id")
  userId                String?     @map("user_id") @db.Uuid
  scholarship           Scholarship @relation(fields: [scholarshipId], references: [id])

  @@map("prompt_personalities")
}

model PromptPriority {
  id              String       @id @unique @default(uuid())
  primaryFocus    PrimaryFocus @map("primary_focus")
  priorityWeights Json         @map("priority_weights")
  scholarshipId   String       @unique @map("scholarship_id")
  userId          String?      @map("user_id") @db.Uuid
  scholarship     Scholarship  @relation(fields: [scholarshipId], references: [id])

  @@map("prompt_priorities")
}

model PromptValue {
  id               String      @id @unique @default(uuid())
  valuesEmphasized String[]    @map("values_emphasized")
  valueDefinitions Json        @map("value_definitions")
  evidencePhrases  String[]    @map("evidence_phrases")
  scholarshipId    String      @unique @map("scholarship_id")
  userId           String?     @map("user_id") @db.Uuid
  scholarship      Scholarship @relation(fields: [scholarshipId], references: [id])

  @@map("prompt_values")
}

model PromptWeight {
  id            String      @id @unique @default(uuid())
  weights       Json
  scholarshipId String      @unique @map("scholarship_id")
  userId        String?     @map("user_id") @db.Uuid
  scholarship   Scholarship @relation(fields: [scholarshipId], references: [id])

  @@map("prompt_weights")
}

model Scholarship {
  id                String             @id @unique @default(uuid())
  title             String
  description       String
  prompt            String
  userId            String?            @map("user_id") @db.Uuid
  drafts            Draft?
  promptPersonality PromptPersonality?
  promptPriority    PromptPriority?
  promptValue       PromptValue?
  promptWeight      PromptWeight?

  @@map("scholarships")
}

model WhiteboardData {
  id              String   @id @unique @default(uuid())
  userId          String   @unique @map("user_id") @db.Uuid
  cells           Json     @default("[]")
  scholarships    Json     @default("[]")
  essays          Json     @default("[]")
  jsonOutputs     Json     @default("[]") @map("json_outputs")
  blockPositions  Json     @default("[]") @map("block_positions")
  isFirstTimeUser Boolean  @default(true) @map("is_first_time_user")
  createdAt       DateTime @default(now()) @map("created_at")
  updatedAt       DateTime @map("updated_at")

  @@map("whiteboard_data")
}

enum ImportanceLevel {
  HIGH
  MEDIUM
  LOW
}

enum PrimaryFocus {
  MERIT
  COMMUNITY
  INNOVATION
  LEADERSHIP
  ACADEMIC_EXCELLENCE
  EQUITY
  OTHER
}
